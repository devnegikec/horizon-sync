# PDF Generation Flow Diagram

## Complete Flow: From Quotation to Email with PDF

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     QuotationDetailDialog.tsx                        â”‚
â”‚                                                                      â”‚
â”‚  User clicks "Send Email" button                                    â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  handleSendEmail() function                                         â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”œâ”€â–º 1. convertQuotationToPDFData(quotation)                â”‚
â”‚         â”‚      â””â”€â–º Returns PDFDocumentData                          â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”œâ”€â–º 2. generateBase64(pdfData)                             â”‚
â”‚         â”‚      â””â”€â–º Returns base64 string                            â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”œâ”€â–º 3. setPdfAttachment({                                  â”‚
â”‚         â”‚         filename: "QT-2024-001.pdf",                      â”‚
â”‚         â”‚         content: base64String,                            â”‚
â”‚         â”‚         content_type: "application/pdf"                   â”‚
â”‚         â”‚      })                                                    â”‚
â”‚         â”‚                                                            â”‚
â”‚         â””â”€â–º 4. setEmailDialogOpen(true)                            â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EmailComposer.tsx                              â”‚
â”‚                                                                      â”‚
â”‚  Receives props:                                                    â”‚
â”‚    - defaultAttachments: [pdfAttachment]                           â”‚
â”‚    - defaultRecipient: customer email                              â”‚
â”‚    - defaultSubject: "Quotation QT-2024-001"                       â”‚
â”‚    - defaultMessage: email body                                     â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  Renders EmailComposerDialog                                        â”‚
â”‚         â”‚                                                            â”‚
â”‚         â””â”€â–º Passes defaultAttachments to dialog                    â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   EmailComposerDialog.tsx                            â”‚
â”‚                      (UI Library)                                    â”‚
â”‚                                                                      â”‚
â”‚  useEffect(() => {                                                  â”‚
â”‚    setAttachments(defaultAttachments || [])                        â”‚
â”‚  }, [defaultAttachments])                                           â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  Displays:                                                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚    â”‚ Attachments:                           â”‚                      â”‚
â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                      â”‚
â”‚    â”‚ â”‚ ğŸ“ QT-2024-001.pdf [Auto-attached] â”‚ â”‚                      â”‚
â”‚    â”‚ â”‚                              [X]    â”‚ â”‚                      â”‚
â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                      â”‚
â”‚    â”‚ [Add Attachments]                      â”‚                      â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  User clicks "Send Email"                                           â”‚
â”‚         â”‚                                                            â”‚
â”‚         â””â”€â–º onSend({ attachments: [...] })                         â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EmailComposer.tsx                              â”‚
â”‚                                                                      â”‚
â”‚  handleSend(data) {                                                 â”‚
â”‚    // Merge default + user attachments                             â”‚
â”‚    const allAttachments = [                                         â”‚
â”‚      ...(defaultAttachments || []),  // PDF                        â”‚
â”‚      ...data.attachments              // User added                â”‚
â”‚    ]                                                                â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚    sendEmail({                                                      â”‚
â”‚      to: data.to,                                                   â”‚
â”‚      subject: data.subject,                                         â”‚
â”‚      message: data.message,                                         â”‚
â”‚      attachments: allAttachments,  // â† PDF included!              â”‚
â”‚      doc_type: "quotation",                                         â”‚
â”‚      doc_id: quotation.id                                           â”‚
â”‚    })                                                                â”‚
â”‚  }                                                                   â”‚
â”‚         â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Communication Service                             â”‚
â”‚                                                                      â”‚
â”‚  POST /api/v1/communications/send                                   â”‚
â”‚  {                                                                   â”‚
â”‚    "to": "customer@example.com",                                    â”‚
â”‚    "subject": "Quotation QT-2024-001",                             â”‚
â”‚    "message": "Please find attached...",                           â”‚
â”‚    "attachments": [                                                 â”‚
â”‚      {                                                               â”‚
â”‚        "filename": "QT-2024-001.pdf",                              â”‚
â”‚        "content": "base64EncodedPDFContent...",                    â”‚
â”‚        "content_type": "application/pdf"                           â”‚
â”‚      }                                                               â”‚
â”‚    ],                                                                â”‚
â”‚    "doc_type": "quotation",                                         â”‚
â”‚    "doc_id": "uuid-here"                                            â”‚
â”‚  }                                                                   â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  Email sent with PDF attached! âœ…                                   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## PDF Generation Internal Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    usePDFGeneration Hook                             â”‚
â”‚                                                                      â”‚
â”‚  generateBase64(pdfData)                                            â”‚
â”‚         â”‚                                                            â”‚
â”‚         â–¼                                                            â”‚
â”‚  generatePDFBlob(pdfData)                                           â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”œâ”€â–º pdf(<DocumentPDF data={pdfData} />)                    â”‚
â”‚         â”‚      â”‚                                                     â”‚
â”‚         â”‚      â””â”€â–º @react-pdf/renderer renders PDF                 â”‚
â”‚         â”‚             â”‚                                              â”‚
â”‚         â”‚             â”œâ”€â–º Header (Company info)                     â”‚
â”‚         â”‚             â”œâ”€â–º Document title & info                     â”‚
â”‚         â”‚             â”œâ”€â–º Customer details                          â”‚
â”‚         â”‚             â”œâ”€â–º Line items table                          â”‚
â”‚         â”‚             â”œâ”€â–º Tax summary                               â”‚
â”‚         â”‚             â”œâ”€â–º Totals                                    â”‚
â”‚         â”‚             â”œâ”€â–º Remarks                                   â”‚
â”‚         â”‚             â””â”€â–º Footer                                    â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”œâ”€â–º .toBlob()                                               â”‚
â”‚         â”‚      â””â”€â–º Returns Blob                                     â”‚
â”‚         â”‚                                                            â”‚
â”‚         â””â”€â–º Convert Blob to Base64                                  â”‚
â”‚                â”‚                                                     â”‚
â”‚                â””â”€â–º FileReader.readAsDataURL()                       â”‚
â”‚                       â””â”€â–º Returns base64 string                     â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Transformation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Quotation Object                             â”‚
â”‚  {                                                                   â”‚
â”‚    id: "uuid",                                                       â”‚
â”‚    quotation_no: "QT-2024-001",                                     â”‚
â”‚    customer_name: "Acme Corp",                                      â”‚
â”‚    items: [                                                          â”‚
â”‚      {                                                               â”‚
â”‚        item_name: "Widget A",                                       â”‚
â”‚        qty: 10,                                                      â”‚
â”‚        rate: 100,                                                    â”‚
â”‚        amount: 1000,                                                 â”‚
â”‚        tax_amount: 180,                                             â”‚
â”‚        tax_info: { ... }                                            â”‚
â”‚      }                                                               â”‚
â”‚    ],                                                                â”‚
â”‚    grand_total: 1180                                                â”‚
â”‚  }                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              convertQuotationToPDFData(quotation)                    â”‚
â”‚                                                                      â”‚
â”‚  Transforms to:                                                     â”‚
â”‚    - Extract currency symbol                                        â”‚
â”‚    - Map line items to PDFLineItem[]                               â”‚
â”‚    - Calculate subtotal, tax total                                  â”‚
â”‚    - Build tax summary with breakup                                â”‚
â”‚    - Format dates                                                   â”‚
â”‚    - Add company information                                        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PDFDocumentData                                 â”‚
â”‚  {                                                                   â”‚
â”‚    type: "quotation",                                               â”‚
â”‚    documentNo: "QT-2024-001",                                       â”‚
â”‚    date: "2024-02-20",                                              â”‚
â”‚    currency: "USD",                                                 â”‚
â”‚    currencySymbol: "$",                                             â”‚
â”‚    companyName: "Your Company",                                     â”‚
â”‚    customerName: "Acme Corp",                                       â”‚
â”‚    lineItems: [                                                      â”‚
â”‚      {                                                               â”‚
â”‚        index: 1,                                                     â”‚
â”‚        itemName: "Widget A",                                        â”‚
â”‚        quantity: 10,                                                 â”‚
â”‚        rate: 100,                                                    â”‚
â”‚        amount: 1000,                                                 â”‚
â”‚        taxAmount: 180,                                              â”‚
â”‚        totalAmount: 1180                                            â”‚
â”‚      }                                                               â”‚
â”‚    ],                                                                â”‚
â”‚    subtotal: 1000,                                                  â”‚
â”‚    totalTax: 180,                                                   â”‚
â”‚    grandTotal: 1180,                                                â”‚
â”‚    taxSummary: [...]                                                â”‚
â”‚  }                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DocumentPDF Component                           â”‚
â”‚                                                                      â”‚
â”‚  Renders PDF with:                                                  â”‚
â”‚    - Styled layout                                                  â”‚
â”‚    - Formatted currency                                             â”‚
â”‚    - Formatted dates                                                â”‚
â”‚    - Professional appearance                                        â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PDF File                                     â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Your Company Name                                            â”‚  â”‚
â”‚  â”‚ 123 Business Street                                          â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚ QUOTATION                                                    â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚ Document Number: QT-2024-001                                â”‚  â”‚
â”‚  â”‚ Date: Feb 20, 2024                                          â”‚  â”‚
â”‚  â”‚ Customer: Acme Corp                                         â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ # â”‚ Item    â”‚ Qty â”‚ Rate  â”‚ Amount â”‚ Tax   â”‚ Total   â”‚ â”‚  â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚  â”‚ â”‚ 1 â”‚Widget A â”‚ 10  â”‚ $100  â”‚ $1,000 â”‚ $180  â”‚ $1,180  â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚ Subtotal: $1,000.00                                         â”‚  â”‚
â”‚  â”‚ Tax:      $  180.00                                         â”‚  â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚  â”‚
â”‚  â”‚ Total:    $1,180.00                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ QuotationDetailDialogâ”‚
â”‚                      â”‚
â”‚  [Preview PDF]       â”‚â”€â”€â”
â”‚  [Download PDF]      â”‚  â”‚
â”‚  [Send Email]        â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
           â”‚              â”‚
           â”‚              â”‚ usePDFGeneration
           â”‚              â”‚
           â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     usePDFGeneration Hook        â”‚
â”‚                                  â”‚
â”‚  - generateBase64()              â”‚
â”‚  - generateBlob()                â”‚
â”‚  - download()                    â”‚
â”‚  - preview()                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ uses
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PDF Generation Utilities       â”‚
â”‚                                  â”‚
â”‚  - generatePDFBlob()             â”‚
â”‚  - generatePDFBase64()           â”‚
â”‚  - downloadPDF()                 â”‚
â”‚  - previewPDF()                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ uses
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      DocumentPDF Component       â”‚
â”‚                                  â”‚
â”‚  React-PDF component that        â”‚
â”‚  renders the actual PDF          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management Flow

```
QuotationDetailDialog State:
  â”œâ”€ emailDialogOpen: boolean
  â”œâ”€ pdfAttachment: EmailAttachment | null
  â””â”€ pdfLoading: boolean (from usePDFGeneration)

EmailComposer State:
  â””â”€ (receives pdfAttachment as defaultAttachments prop)

EmailComposerDialog State:
  â”œâ”€ to: string
  â”œâ”€ cc: string[]
  â”œâ”€ subject: string
  â”œâ”€ message: string
  â””â”€ attachments: EmailAttachment[]  â† includes PDF!
```
